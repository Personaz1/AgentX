# NeuroRAT Инструменты Мониторинга

Набор инструментов для мониторинга и взаимодействия с NeuroRAT в контейнере Docker.

## Содержимое

1. **brain_terminal.py** - Интерактивный терминальный интерфейс для взаимодействия с агентами и просмотра событий
2. **direct_proxy.py** - Прокси-сервер с веб-интерфейсом для перехвата и логирования API-запросов
3. **run_monitor.sh** - Скрипт для запуска различных инструментов мониторинга

## Начало работы

```bash
cd monitor
./run_monitor.sh
```

## Режимы работы

### Терминальный интерфейс

Интерактивный терминал для управления агентами NeuroRAT через командную строку:

```bash
./run_monitor.sh terminal
```

Основные команды:
- `agents` - Показать список агентов
- `select N` - Выбрать агента по номеру
- `events` - Показать последние события
- `monitor` - Включить/выключить мониторинг событий в реальном времени
- `logs` - Просмотр логов контейнера

После выбора агента доступны специальные команды:
- `STATUS` - Запросить статус агента
- `COLLECT` - Собрать информацию о системе
- `SCAN` - Сканировать сеть
- `SCREENSHOT` - Сделать скриншот

### API Прокси с веб-интерфейсом

Перехват и логирование всех API-запросов между компонентами NeuroRAT:

```bash
./run_monitor.sh proxy
```

Веб-интерфейс для просмотра логов будет доступен по адресу:
- http://localhost:8888/

Для использования прокси в своих скриптах направляйте запросы на:
- http://localhost:8888/proxy/api/...

Остановка прокси-сервера:

```bash
./run_monitor.sh stop-proxy
```

### Работа внутри контейнера

Запуск терминального интерфейса внутри контейнера:

```bash
./run_monitor.sh container
```

Открытие bash-консоли в контейнере:

```bash
./run_monitor.sh bash
```

## Рекомендации по использованию

1. **Для общего мониторинга**: запустите прокси-сервер с веб-интерфейсом и откройте его в браузере
2. **Для прямого управления агентами**: используйте терминальный интерфейс
3. **Для отладки**: подключитесь напрямую к контейнеру через bash

## Особенности работы с API

При работе с API в собственных скриптах используйте следующие эндпоинты:

- Список агентов: `GET /api/agents`
- Информация об агенте: `GET /api/agent/{agent_id}`
- Отправка команды: `POST /api/agent/{agent_id}/chat`
- Последние события: `GET /api/events`

Пример отправки команды:
```python
response = requests.post(
    "http://localhost:5001/api/agent/7a083c2b/chat",
    json={"message": "COLLECT network"}
)
```

## Устранение неполадок

- Если прокси-сервер не отвечает, проверьте его статус: `ps aux | grep direct_proxy.py`
- Если агенты не отображаются, проверьте статус контейнера: `docker ps`
- Для просмотра логов контейнера: `./run_monitor.sh logs` 