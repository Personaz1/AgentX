# Backend Refactor Plan: Запуск модулей агентом

## Проблема

Сейчас endpoints типа `/api/agent/{agent_id}/wallets/steal` вызывают модули на сервере, а не на самом агенте. Это неправильно: агент должен сам запускать свои инструменты по команде сервера.

## Цель

- Сервер отправляет агенту команду на запуск модуля (через websocket, очередь, REST и т.д.)
- Агент запускает модуль у себя (через run_module)
- Агент возвращает результат на сервер
- Сервер возвращает результат клиенту

## Шаги

1. Переделать endpoints `/api/agent/{agent_id}/wallets/steal` и аналоги:
   - Вместо локального запуска — отправлять команду агенту (run_module: wallets)
   - Ждать ответа от агента (через очередь, websocket, polling)
   - Возвращать результат клиенту

2. Убедиться, что агент умеет принимать команды run_module и запускать нужный модуль (см. neurorat_agent.py, agent_protocol/agent.py)

3. Добавить/уточнить документацию для reasoning-агента (см. AGENT_TOOLS.md)

4. (Опционально) — добавить тесты для этой логики

## Пример (псевдокод)

POST /api/agent/{agent_id}/wallets/steal:
- Отправить агенту: {"command": "run_module", "module": "crypto_stealer"}
- Дождаться ответа
- Вернуть результат клиенту 