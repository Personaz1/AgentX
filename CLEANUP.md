# ИНСТРУКЦИЯ ПО ОЧИСТКЕ ПРОЕКТА NEURORAT

После большого обновления необходимо удалить устаревшие файлы и компоненты, чтобы избежать конфликтов и ошибок. Эта инструкция поможет правильно очистить проект.

## 1. Устаревшие директории и файлы

Следующие директории и файлы больше не используются и могут быть удалены:

- `frontend/` - устаревшая версия панели управления
- `start_*.sh` - старые скрипты запуска (кроме основного `start.sh`)
- `launcher*.sh` - устаревшие скрипты запуска
- Все временные файлы (с расширениями `.tmp`, `.bak`, `.old`)

## 2. Структура нового проекта

Новая структура проекта должна выглядеть так:

```
NeuroRAT/
├── admin-panel-new/       # Новая панель управления
│   ├── dist/              # Скомпилированные файлы фронтенда
│   ├── node_modules/      # Зависимости npm (не добавлять в git)
│   ├── src/               # Исходный код фронтенда
│   └── ...
├── agent_modules/         # Модули агента
├── neurorat-ui/           # Альтернативная UI версия (в разработке)
├── server_api.py          # Бэкенд сервер
├── botnet_controller.py   # Контроллер ботнета
├── neurozond.py           # Модуль для зондов
├── zond_protocol.py       # Протокол связи с зондами
├── start.sh               # Основной скрипт запуска
├── .env                   # Конфигурационный файл с секретами (не добавлять в git)
└── ...
```

## 3. Процедура очистки

Для очистки проекта выполните следующие команды:

```bash
# Удаляем устаревшие папки и файлы
rm -rf frontend/
rm -f start_*.sh
rm -f launcher*.sh
rm -f *_old.*
rm -f *.bak
rm -f *.tmp

# Удаляем старые кэши сборки
rm -rf frontend/.pytest_cache/
rm -rf .pytest_cache/
rm -rf __pycache__/
rm -rf */__pycache__/

# Очищаем временные логи
rm -f *.log.old
```

## 4. Инструкция по запуску

После очистки проекта запуск осуществляется через единый скрипт `start.sh`:

```bash
# Разрешаем выполнение скрипта
chmod +x start.sh

# Запускаем проект
./start.sh
```

Этот скрипт выполнит:
1. Сборку нового фронтенда
2. Настройку и перезапуск Nginx
3. Запуск бэкенд-сервера

## 5. Обновление конфигурации Nginx

Убедитесь, что конфигурация Nginx настроена на использование новой панели управления:

```nginx
server {
    listen 80;
    server_name _;

    # Фронтенд (путь к новой панели)
    location / {
        root /path/to/admin-panel-new/dist;
        index index.html;
        try_files $uri $uri/ /index.html;
    }

    # API
    location /api {
        proxy_pass http://localhost:8080;
        # ... другие настройки прокси
    }
}
```

## 6. Примечания

- Все API ключи и секреты должны храниться в файле `.env` в корне проекта
- Для разработки фронтенда используйте `cd admin-panel-new && npm run dev`
- Для отладки бэкенда запускайте `python3 server_api.py` напрямую

После выполнения этих инструкций проект будет очищен от устаревших файлов и готов к использованию в обновленной версии.

# Очистка проекта (Cleanup)

## Что было сделано

1. **Удалены временные файлы:**
   - Кэш Python (`__pycache__`, `*.pyc`, `*.pyo`)
   - Логи (`*.log`)
   - Неиспользуемые временные файлы в uploads

2. **Исправлен .gitignore:**
   - Добавлены правила для Node.js/React (frontend)
   - Добавлены правила для IDE/редакторов
   - Настроено игнорирование логов и временных файлов
   - Настроено сохранение структуры каталогов (`.gitkeep`)

3. **Очищен код server_api.py:**
   - Удалены заглушки классов `NeuroRATMonitor`, `APIFactory` и `DummyAPI`
   - Удален дублирующийся эндпоинт `/api/files/upload`
   - Объединены дублирующиеся эндпоинты `steal_cookies` и `steal_browser_data`
   - Исправлен маршрут `/chat` для перенаправления на React-фронтенд

4. **Настроена структура каталогов:**
   - Создан каталог uploads с .gitkeep для сохранения структуры
   - Удалены ненужные тестовые файлы

## Что улучшилось

1. **Уменьшен размер репозитория:**
   - Удалены неиспользуемые временные файлы
   - Настроено правильное игнорирование в Git

2. **Улучшено качество кода:**
   - Удалены дублирующиеся эндпоинты
   - Объединен одинаковый функционал
   - Обновлен маршрут для React-фронтенда

3. **Более чистая структура проекта:**
   - Логическая организация каталогов
   - Избавление от ненужных файлов

## Следующие шаги

1. **Рефакторинг кода:**
   - Выделение повторяющихся частей в отдельные функции 
   - Улучшение обработки ошибок

2. **Оптимизация производительности:**
   - Асинхронная обработка запросов
   - Кэширование данных

3. **Улучшение безопасности:**
   - Проверка входных данных
   - Защита от XSS/CSRF 